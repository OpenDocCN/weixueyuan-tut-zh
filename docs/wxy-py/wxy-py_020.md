# Python 小整数池

> 原文：[`www.weixueyuan.net/a/379.html`](http://www.weixueyuan.net/a/379.html)

本节介绍有关整数池的问题。在 Python 中，整数可以表示的范围很大，但是常用的整数可能都集中在 -1000 到 1000 之间，如考试分数，一般在 0 到 100 之间，年龄也在 0 到 100 之间。

基于整数对象分布不均匀的特性，我们可以做一些优化来提升运行效率。

在 Python 解释器的内部实现中，对于 -5 到 256 内的整数建立了一个小整数池。如果要使用的整数对象在该范围内，其不会自动新建一个整数对象，而是看小整数池中是否有值相同的整数对象：

*   如果有，则返回这个现有的整数对象；
*   如果没有，则创建一个新的整数对象，这个新建的整数对象在以后也可能被共享使用。

我们可以使用函数 id() 来查看对象的地址，在 CPython 中，id() 返回的就是某个对象在内存中的地址信息。我们可以比较这个 id 值来查看是否存在这种共享关系。另外也可以用 is 来检查两个对象是否相同。

```

>>> a = 12      # 创建对象 a，值为 12
>>> id(a)       # 查看 a 的 id 值
8791344854192
>>> b = 11      # 新建对象 b，值为 11
>>> id(b)       # 查看 b 的 id 值
8791344854160   # b 的 id 和 a 的 id 是不同的，它们是不同的整数对象
>>> a is b      # 使用 is 来判断 a 和 b 是不是同一个整数对象
False           # 它们的确不是同一个整数对象
>>> b = b + 1   # 重新给 b 赋值
>>> b           # 查看 b 的值
12              # b 的值和 a 的值相同，都为 12
>>> id(b)       # 查看 b 现在的 id 值
8791344854192   # b 的 id 发生了变化，现在和 a 相同了
>>> a is b      # 用 is 来检查 a 和 b 是否是同一个对象
True            # 它们的确是同一个对象
```