# Go 语言位运算符

> 原文：[`www.weixueyuan.net/a/495.html`](http://www.weixueyuan.net/a/495.html)

位运算符是对整数在内存中的二进制位进行操作。

位运算符比一般的算术运算符速度要快，而且可以实现一些算术运算符不能实现的功能。如果要开发高效率程序，位运算符是必不可少的。位运算符用来对二进制位进行操作，包括：按位与（＆）、按位或（|）、按位异或（^）、按位左移（<<）、按位右移（>>）。

假定 A = 60，B = 13，其二进制数转换如下。

A = 0011 1100
B = 0000 1101

A&b = 0000 1100
A|B = 0011 1101
A^B = 0011 0001

Go 语言支持的位运算符如下表所示。（假定 A 为 60，B 为 13）

表：位运算符

| 运算符 | 描述 | 实例 |
| & | 按位与运算符"&"是双目运算符。其功能是参与运算的两数各对应的二进制位相与 | (A&B) 结果为 12，二进制为 0000 1100 |
| &#124; | 按位或运算符“&#124;”是双目运算符。其功能是参与运算的两数各对应的二进制位相或 | (A&#124;B) 结果为 61，二进制为 0011 1101 |
| ^ | 按位异或运算符“^”是双目运算符。其功能是参与运算的两数各对应的二进制位相异或，当两对应的二进制位相异时，结果为 1 | (A^B) 结果为 49，二进制为 0011 0001 |
| << | 左移运算符“<<”是双目运算符。左移 n 位就是乘以 2 的 n 次方。其功能是把“<<”左边的运算数的各二进制位全部左移若干位，由“<<”右边的数指定移动的位数，高位舍弃，低位补 0 | (A<<2) 结果为 240，二进制 1111 0000 |
| >> | 右移运算符“>>”是双目运算符。右移 n 位就是除以 2 的 n 次方。其功能是把“>>”左边的运算数的各二进制位全部右移若干位，“>>”右边的数指定移动的位数 | (A>>2) 结果为 15，二进制为 0000 1111 |

## 1、按位与

按位与（＆）：对两个数进行操作，然后返回一个新的数，这个数的每一位都需要两个输入数的同一位都为 1 时才为 1。简单说就是，同一位同时为 1 则为 1，如下所示。

表：按位与

| 252&63 |
| 252 | 1 | 1 | 1 | 1 | 1 | 1 | 0 | 0 |
| 63 | 0 | 0 | 1 | 1 | 1 | 1 | 1 | 1 |
| 60 | 0 | 0 | 1 | 1 | 1 | 1 | 0 | 0 |

252 的二进制可以表示为 11111100，63 的二进制可以表示为 00111111，将每一位都进行与运算后结果为 00111100，转换为十进制的结果为 60。

## 2、按位或

按位或（|）：对两个数进行操作，然后返回一个新的数，这个数的每一位只要任意一个输入数的同一位为 1 则为 1。简单说就是：同一位其中一个为 1 则为 1，如下所示。

表：按位或

| 178&#124;94 |
| 178 | 1 | 0 | 1 | 1 | 0 | 0 | 1 | 0 |
| 94 | 0 | 1 | 0 | 1 | 1 | 1 | 1 | 0 |
| 254 | 1 | 1 | 1 | 1 | 1 | 1 | 1 | 0 |

178 的二进制可以表示为 10110010，94 的二进制可以表示为 01011110，将每一位都进行或运算后结果为 11111110，转换为十进制的结果为 254。

## 3、按位异或

按位异或（^）：对两个数进行操作，然后返回一个新的数，这个数的每一位只要两个输入数的同一位不同则为 1，如果相同就为 0。简单说就是：同一位不相同则为 1，如下所示。

表：按位异或

| 20⁵ |
| 20 | 0 | 0 | 0 | 1 | 0 | 1 | 0 | 0 |
| 5 | 0 | 0 | 0 | 0 | 0 | 1 | 0 | 1 |
| 17 | 0 | 0 | 0 | 1 | 0 | 0 | 0 | 1 |

20 的二进制可以表示为 00010100，5 的二进制可以表示为 00000101，将每一位都进行异或运算后结果为 00010001，转换为十进制的结果为 17。

## 4、左移运算符

按二进制形式把所有的数字向左移动对应的位数，高位移出（舍弃），低位的空位补 0。

#### 1) 语法格式

需要移位的数字 << 移位的次数

例如，3 << 4，则是将数字 3 左移 4 位。

#### 2) 计算过程

3 << 4

首先把 3 转换为二进制数字 0000 0000 0000 0000 0000 0000 0000 0011，然后把该数字高位（左侧）的 4 个 0 移出，其他的数字都朝左平移 4 位，最后在低位（右侧）的 4 个空位补 0。则得到的最终结果是 0000 0000 0000 0000 0000 0000 0011 0000，转换为十进制是 48。

#### 3) 数学意义

在数字没有溢出的前提下，对于正数和负数，左移 1 位都相当于乘以 2 的 1 次方，左移 n 位就相当于乘以 2 的 n 次方，如下所示。

表：左移运算

| 3<<4 |
| 3 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 1 |
| 3<<4 | 0 | 0 | 1 | 1 | 0 | 0 | 0 | 0 |
| 48 | 3x2⁴ |

3 的二进制可以表示为 00000011，将每一位向左移动 4 位，高位移出（舍弃），低位的空位补 0，运算结果为 00110000，转换为十进制的结果为 48。

## 5、右移运算符

按二进制形式把所有的数字向右移动对应的位数，低位移出（舍弃），高位的空位补符号位，即正数补 0，负数补 1。

#### 1) 语法格式

需要移位的数字 >> 移位的次数

例如，11 >> 2，则是将数字 11 右移 2 位。

#### 2) 计算过程

11 的二进制形式为：0000 0000 0000 0000 0000 0000 0000 1011，然后把低位的最后 2 个数字移出，因为该数字是正数，所以在高位补 0。则得到的最终结果是 0000 0000 0000 0000 0000 0000 0000 0010。转换为十进制是 2。

#### 3) 数学意义

右移 1 位相当于除以 2，右移 n 位相当于除以 2 的 n 次方，如下所示。

表：右移运算

| 11>>2 |
| 11 | 0 | 0 | 0 | 0 | 1 | 0 | 1 | 1 |
| 11>>2 | 0 | 0 | 0 | 0 | 0 | 0 | 1 | 0 |
| 2 | 11÷2² |

11 的二进制可以表示为 00001011，每一位向右移动 2 位，低位移出（舍弃），高位正数补 0，运算结果为 00000010，转换为十进制的结果为 2。

位运算符的用法，如下所示。

```

package main

import "fmt"

func main() {
    var a uint = 60
    var b uint = 13
    var c uint = 0
    c = a & b
    fmt.Printf("第一行 - c 的值为 %d \n", c)
    c = a | b
    fmt.Printf("第二行 - c 的值为 %d \n", c)
    c = a ^ b
    fmt.Printf("第三行 - c 的值为 %d \n", c)
    c = a << 2
    fmt.Printf("第四行 - c 的值为 %d \n", c)
    c = a >> 2
    fmt.Printf("第五行 - c 的值为 %d \n", c)
}
```

运行结果如下：

第一行 - c 的值为 12
第二行 - c 的值为 61
第三行 - c 的值为 49
第四行 - c 的值为 240
第五行 - c 的值为 15