# vi 文本复制命令（复制文件内容）

vi 编辑器可以在编辑模式和命令模式下复制文本。常用的复制文本的命令如表 1 所示。

表 1：命令模式下常用的文本复制命令

| 文本复制命令 | 命令的意义 | 文本复制命令 | 命令的意义 |
| yy | 复制光标所在的整行 | y{ | 复制到上一段的开始 |
| Y 或 y$ | 复制从光标所在处开始到行尾的内容 | y} | 复制到下一段的开始 |
| y0 | 复制从光标前一个字符开始到行首的内容 | y<CR> | 复制包括当前行在内的两行内容 |
| y( | 复制到上一句的开始 | yw | 复制一个单词 |
| y) | 复制到下一句的开始 |   |   |

*   yy 命令：复制光标所在的整行。在 yy 前可加一个数字 n，表示复制当前行及其后 n-1 行的内容。
*   Y 或 y$ 命令：两命令功能一样，都是复制从光标所在处开始到行尾的内容。
*   yw 命令：复制一个单词。若光标处在某个词的中间，则从光标所在位置开始复制至词尾。同 yy 命令一样，可在 yw 之前加一个数字 n，表示复制 n 个指定的单词。
*   y) 命令：复制到下一句幵始的所有字符。
*   y} 命令：复制到下一段开始的所有字符。
*   y<CR> 命令（<CR> 表示回车）：复制包括当前行在内的两行内容。

与文本复制有关的命令分为两类。

#### 1\. 文本粘贴命令

*   p 命令：粘贴命令，粘贴当前缓冲区中的内容。

#### 2\. 文本选择命令

*   v 命令：在命令模式下进行文本选择。在需要选择的文本的起始处按下 v 键进入块选择模式，然后移动光标到块尾处。这之间的部分被高亮显示，表示被选中。
*   V 命令：在命令模式下按行进行文本选择。在需要选择的文本的第一行按下 V 键，然后移动光标到块的最后一行。这之间的所有行被高亮显示，表示被选中。

vi 编辑器支持最近编辑内容的恢复，但是由于 vi 编辑器使用寄存器存放最近内容，所以恢复能力有限。vi 编辑器使用 9 个寄存器，可以存放已经删除的 9 个最近内容，这些内容可以被恢复。下面实例简述了这种机制。

#include <stdio.h>
int main(void)
{
    int i, j;
    printf("please input a number: \n");
    scanf(" % d ", &i);
    j = i + 100;
    printf("\nj = %d\n", j);
    return 0;
}

现在对其进行如下操作。

1) 将光标移至文件第 1 行，输入 dd 命令，此时文件第 1 行的内容被删除，且被删除的内容保存在寄存器 1 中。这行的内容是`#indude <stdio.h>`，被保存在寄存器 1 中。

2) 将光标下移至第 1 个 printf 语句行，输入 dd 命令将该行删除，此时寄存器 1 中将保存刚刚被删除的内容。也就是说`#indude <stdio.h>`被保存到了寄存器 2 中，而`printf("please input a number: \n");`这一行的内容被保存在了寄存器 1 中。