# Linux 关机和重启命令

> 原文：[`www.weixueyuan.net/a/154.html`](http://www.weixueyuan.net/a/154.html)

由于 Linux 是一种多用户、多任务操作系统，因此在切断计算机电源之前，必须先关闭 Linux 系统。决不能不执行关机进程就切断计算机电源，这样做会导致保存在内存缓冲区的磁盘数据来不及写回磁盘，从而破坏文件系统。下面介绍与关机和重启计算机有关的命令。

## 1\. shutdown 命令

shutdown 命令可以安全地关闭或重启 Linux 系统，它在系统关闭之前给系统上的所有登录用户提示一条警告信息。该命令还允许用户指定一个时间参数，可以是一个精确的时间，也可以是从现在开始的一个时间段。精确时间的格式是`hh：mm`，表示小时和分钟；时间段由`+`和分钟数表示。系统执行该命令后，会自动进行数据同步的工作。该命令使用方式如下：

shutdown [选项] [时间] [警告信息]

shutdown 命令选项说明如表 1 所示。

表 1：shutdown 命令选项说明

| 选项 | 说明 |
| --- | --- |
| -k | 并不真正关机，而只是发出警告信息给所有用户。 |
| -r | 关机后立即重新启动 |
| -h | 关机后不重新启动 |
| -c | 取消一个已经运行的 shutdown |

注意：关机命令需要 root 权限。

## 2\. halt 命令

halt 是最简单的关机命令，其实际上是调用 shutdown-h 命令。halt 执行时，杀死应用进程，文件系统写操作完成后就会停止内核。该命令的使用方式如下：

halt [选项]

halt 命令选项说明如表 2 所示。

表 2：halt 命令选项说明

| 选项 | 说明 |
| --- | --- |
| -n | 在关机前不做将内存资料写回硬盘的动作 |
| -w | 并不会真的关机，只是把记录写到 /var/log/wtmp 文件里。 |
| -d | 不把记录写到 /var/log/wtmp 档案里（-n 这个参数包含了 -d） |
| -f | 强迫关机，不调用 shutdown 这个指令。 |
| -i | 在关机之前先把所有网络相关的装置停止 |
| -p | 当关机的时候，顺便做关闭电源（poweroff）动作。取消一个已经运行的 shutdown。 |

注意：halt 命令同样需要超级用户权限。

## 3\. reboot 命令

reboot 命令用来重新启动计算机。该命令的使用方式如下：

reboot [选项]

reboot 命令选项说明如表 3 所示。

表 3：reboot 命令选项说明

| 选项 | 说明 |
| --- | --- |
| -n | 在关机前不做将内存资料写回硬盘的动作 |
| -w | 并不会真的关机，只是把记录写到 /var/log/wtmp 文件里。 |
| -d | 不把记录写到 /var/log/wtmp 档案里（-n 这个参数包含了 -d） |
| -f | 强迫关机，不调用 shutdown 这个指令。 |
| -i | 在关机之前先把所有网络相关的装置停止 |