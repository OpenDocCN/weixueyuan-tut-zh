# Linux 文件比较命令

> 原文：[`www.weixueyuan.net/a/349.html`](http://www.weixueyuan.net/a/349.html)

Linux 中常用的文件比较命令有两个，分别是 comm 和 diff。

## 文件比较命令（comm）

如果想对两个有序的文件进行比较，可以使用 comm 命令。该命令的使用方式如下：

comm [-123] file1 file2

该命令是对两个已经排好序的文件进行比较。其中 file1 和 file2 是已排序的文件。comm 读取这两个文件，然后生成三列输出：仅在 file1 中出现的行；仅在 file2 中出现的行；在两个文件中都存在的行。

如果文件名用“-”，则表示从标准输入读取。选项 1、2 或 3 抑制相应的列显示：

*   comm -12 只显示在两个文件中都存在的行。
*   comm -23 只显示在第一个文件中出现而未在第二个文件中出现的行。
*   comm -123 则什么也不显示。

## 文件内容比较命令（diff）

diff 命令的功能为逐行比较两个文本文件，列出其不同之处。它对给出的文件进行系统的检查，并显示出两个文件中不同的行，不要求事先对文件进行排序。该命令的使用方式如下：

diff [选项] file1 file2

该命令告诉用户，为了使两个文件 file1 和 file2 一致，需要修改它们的哪些行。如果用“-”表示 file1 或 file2，则表示标准输入。如果 file1 或 file2 是目录，那么 diff 将使用该目录中的同名文件进行比较。通常输出由下述形式的行组成：

n1 a n3,n4
n1,n2 d n3
n1,n2 c n3,n4

字母（a、d 和 c）之前的行号（n1，n2）是针对 file1 的，其后面的行号（n3，n4）是针对 file2 的。字母 a、d 和 c 分别表示附加、删除和修改操作。

在上述形式的每一行的后面跟随受到影响的若干行，以`＜`打头的行属于第一个文件，以`＞`打头的行属于第二个文件。

diff 能区别块和字符设备文件及 FIFO（管道文件），不会把它们与普通文件进行比较。

如果 file1 和 file2 都是目录，则 diff 会产生很多信息。如果一个目录中只有一个文件，则产生一条信息，指出该目录路径名和其中的文件名。

注意：diff 命令常常用于对比经过修改的文件的前后异同。

diff 命令选项说明如表 7 所示。

表 7：diff 命令选项说明

| 选项 | 说明 |
| --- | --- |
| -b | 忽略行尾的空格，而字符串中的一个或多个空格符都视为相等。 |
| -c | 采用上下文输出格式（提供三行上下文） |
| -C n | 采用上下文输出格式（提供 n 行上下文） |
| -e | 产生一个合法的 ed 脚本作为输出 |
| -r | 当 file1 和 file2 是目录时，递归作用到各文件和目录上。   |