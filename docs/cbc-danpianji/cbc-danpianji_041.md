# C 语言数组

## 数组的基本概念

第四章已经学过变量的基本类型，比如 char、int 等等。这种类型描述的都是单个具有特定意义的数据，当我们要处理拥有同类意义但是却包含很多个数据的时候，就可以用到数组了，比如我们上节课那个数码管的真值表，就是用一个数组来表达的。

从概念上讲，数组是具有相同数据类型的有序数据的组合，一般来讲，数组定义后满足以下三个条件。

*   具有相同的数据类型；
*   具有相同的名字；
*   在存储器中是被连续存放的。

比如我们上节课定义的那个数码管真值表，如果我们把关键字 code 去掉，数组元素将被保存在 RAM 中，在程序中可读可写，同时我们也可以在中括号里边标明这个数组所包含的元素个数，比如：

```
unsigned char LedChar[16] = {
    0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8,
    0x80, 0x90, 0x88, 0x83, 0xC6, 0xA1, 0x86, 0x8E
};
```

在这个数组中的每个值都称之为数组的一个元素，这些元素都具备相同的数据类型就是 unsigned char 型，他们有一个共同的名字 LedChar，不管放到 RAM 中还是 FLASH 中，他们都是存放在一块连续的存储空间里的。

有一点要特别注意，这个数组一共有 16（中括号里面的数值）个元素，但是数组的单个元素的表达方式——下标是从 0 开始，因此实际上上边这个数组的首个元素 LedChar[0]的值是 0xC0，而 LedChar[15]的值是 0x8E，下标从 0 到 15 一共是 16 个元素。

LedChar 这个数组只有一个下标，我们称之为一维数组，还有两个下标和多个下标的，我们称之为二维数组和多维数组。比如 unsigned char a[2][3];表示这是一个 2 行 3 列的二维数组。在大多数情况下我们使用的是一维数组，对于初学来说，我们先来研究一维数组，多维数组等遇到了再来了解。

## 数组的声明

一维数组的声明格式如下：

    数据类型  数组名 [数组长度];

1) 数组的数据类型声明的是该数组的每个元素的类型，即一个数组中的元素具有相同的数据类型。

2) 数组名的声明要符合 C 语言固定的标识符的声明要求，只能由字母、数字、下划线这三种符号组成，且第一个字符只能是字母或者下划线。

3) 方括号中的数组长度是一个常量或常量表达式，并且必须是正整数。

## 数组的初始化

数组在进行声明的同时可以进行初始化操作，格式如下：

    数据类型  数组名 [数组长度] = {初值列表};

还是以上节课我们用的数码管的真值表为例来讲解注意事项。

```
unsigned char LedChar[16] = {
    0xC0, 0xF9, 0xA4, 0xB0, 0x99, 0x92, 0x82, 0xF8,
    0x80, 0x90, 0x88, 0x83, 0xC6, 0xA1, 0x86, 0x8E
};
```

1) 初值列表里的数据之间要用逗号隔开；

2) 初值列表里的初值的数量必须等于或小于数组长度，当小于数组长度时，数组的后边没有赋初值的元素由系统自动赋值为 0。

3) 若给数组的所有元素都赋初值，那么可以省略数组的长度，上节课的例子中我们实际上已经省略了数组的长度。

4) 系统为数组分配连续的存储单元的时候，数组元素的相对次序由下标来决定，就是说 LedChar[0]、LedChar[1]„„LedChar[15]是按照顺序紧挨着依次排下来的。

## 数组的使用和赋值

在 C 语言程序中，是不能一次使用整个数组的，只能使用数组的单个元素。一个数组元素相当于一个变量，使用数组元素的时候与使用相同数据类型的变量的方法是一样的。比如 LedChar 这个数组，如果没加 code 关键字，那么它可读可写，我们可以写成 a = LedChar[0]这样来把数组的一个元素的值送个 a 这个变量，也可以写成 LedChar[0] = a 这样把 a 这个变量的值送给数组中的一个元素，以下三点要注意：

*   引用数组的时候，那个方括号里的数字代表的是数组元素的下标，而数组初始化的时候方括号里的数字代表的是这个数组中元素的总数。
*   数组元素的方括号里的下标可以是整型常数，整型变量或者表达式，而数组初始化的时候方括号里的数字必须是常数不能是变量。
*   数组整体赋值只能在初始化的时候进行，程序执行代码中只能对单个元素赋值。